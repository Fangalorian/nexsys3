{
  "name": "nexsys2",
  "enabled": false,
  "description": "Khaseem's updates Nexsys",
  "type": "group",
  "id": 1,
  "items": [
    {
      "type": "function",
      "name": "SCRATCH",
      "enabled": true,
      "id": 397,
      "code": "// All credit goes to Jhui for the original release of Nexsys.\n// I came back to the game in December 2020 having never touched\n// javascript. At the time the choice was between two clients...\n// Mudlet, which a majority of the playerbase seemed to be using,\n// and Nexus, the IRE web based client. I decided to start back in\n// the game on the Nexus client simply because I thought \"If I have\n// to learn a new programming language between Lua and Javascript, I'd\n// rather learn a more popular language.\" I credit learning Javascript\n// to Nexsys and learning how it works. Between frustrating nights on\n// stackexchange and google I was slowly able to understand how Nexsys\n// worked, and learn Javascript at the same time.\n// - Khaseem\n\n// Afflictions missing from Nexsys since its release in 2016 (All elemental lords, depthswalker, psion, pariah, unnamable, paladin/infernal rework)\n// ['asphyxiating', 'blistered', 'bloodfire', 'calcifiedskull', 'calcifiedtorso', 'coldfate', 'concussion', 'constricted', 'cremated', 'crushedthroat', 'dazzled', 'deathsickness', 'deepsleep', 'degenerate', 'depression', 'deteriorate', 'ensorcelled', 'flushings', 'grievouswounds', 'guilt', 'hatred', 'hindered', 'horror', 'indifference', 'isolation', 'kaisurge', 'kkractlebrand', 'lapsingconsciousness', 'latched', 'lightbind', 'mindclamp', 'mindravaged', 'muddled', 'mycalium', 'parasite', 'penitence', 'petrified', 'pressure', 'pyramides', 'pyre', 'rebbies', 'retribution', 'revealed', 'sandfever', 'scrambledbrains', 'shadowmadness', 'silenced', 'silver', 'solarburn', 'spiritburn', 'tenderskin', 'tension', 'timeloop', 'tonguetied', 'unweavingbody', 'unweavingmind', 'unweavingspirit', 'vitiated', 'vitrified', 'waterbonds']\n// 60 total afflictions. These need to be filled out. I added references to them, but things like cures, counts, etc (specifics about the affliction) have not been completed.\n\n// cureService function has 3 nested for loops. I'm not even really sure if this function is necessary.\n// it really seems to only handle things like dwinu and dragonflex. I need to think on this more.\n// defService function is the same potential issue. Does this need to be so complex for what it's handling?\n\n// I don't like the way PrioritySwapping checks everything, at almost every opportunity. There is likely a much\n// more efficient way to streamline the checking/checks. Another thinking cap exercise.\n\n// Nexsys will not remove entries from aff/def models. User settings need to have all the same entries, and set things to 0 that they\n// do not want. Omitting an entry from user settings will not remove the entry from the model. Example: base model has mindseye = 25 for \n// keepup. If in the custom settings you don't set an entry for mindseye = 0 it will always be 25. This is annoying.\n\n// Major (maybe?) \"insulation\" in nexsys was listed and modeled as an affliction/defence in the same manner as insomnia. This was causing weird\n// excessive checks in the background. This sort of makes sense in a non-gmcp world for curing, since freeze attacks will strip insulation first.\n// however, unlike insomnia, insulation is not displayed in GMCP as an affliction and defence. I opted to remove all references to insulation as an\n// affliction.\n\n// nexSys.Affs.asthma.set_default_prio(0) will cause an infinite loop. This stems from the priorityswapping function. Setting to 26 will not cause the same\n// loop. I think this is due to how the priority class reset() function works and how 0 and 26 are both the same regarding priority."
    },
    {
      "type": "function",
      "name": "onLoad",
      "enabled": true,
      "id": 56,
      "code": ""
    },
    {
      "type": "function",
      "name": "onGMCP",
      "enabled": true,
      "id": 55,
      "code": "window.GMCP = window.GMCP || {};\n\nnexSys.gmcpBackLog = nexSys.gmcpBackLog || [];\n\nnexSys.gmcpBackLog.push(args);\n\nif( nexSys.system_loaded ) {\n    try {\n    \tnexSys.gmcpHandler();\n    } catch(err) {\n        console.log(err);\n        throw err;\n    }\n}"
    },
    {
      "type": "function",
      "name": "onBlock",
      "enabled": true,
      "id": 272,
      "code": "/*\nfor(let i = 0; i < current_block.length; i++) {\n    if (typeof current_block[i].line != 'undefined')\n        current_block[i] = {};\n}*/\n/*function test(words) {\n    var n = words.replace('.','').split(\" \");\n    return n[n.length - 1];\n}\nconsole.log(test(current_block[0].line));\nlet regex = new RegExp(`${client.sys.target},?(?:\\\\s\\\\w+)+ is here`);\nconsole.log(regex);\nlet roomCount =  0;\nfor(let i=0;i<current_block.length;i++) {\n\tlet s = current_block[i].line || '';\n    if (s.includes('RName'))\n        roomCount++;\n    else if (s.search(regex) > 0)\n        console.log('Target is ' + roomCount);   \n    \n}*/\nnexSys.eventStream.raiseEvent('PromptEvent');"
    },
    {
      "type": "group",
      "name": "systemStartup",
      "enabled": true,
      "id": 263,
      "items": [
        {
          "type": "function",
          "name": "allLoaded",
          "enabled": true,
          "id": 258,
          "code": "'use strict'\nnexSys.system_loaded = true;\n\nnexSys.eventStream.raiseEvent('SystemLoaded');\n\n// CUSTOM moved the allLoaded run function to an event following all initialization feedback from the game.\n// this was causing issues with User packages that had \"classchange\" events or other things that were firing\n// before full initialization could be set based on response from the game.\nlet allLoaded = function() {\n    run_function('ServersidePrioritySwapping', {}, 'nexSys2.0');\n    run_function('SystemLoaded', {}, 'ALL');\n}\nnexSys.eventStream.registerEvent('CuringStartupCompleteEvent', allLoaded);"
        }
      ]
    },
    {
      "type": "group",
      "name": "system",
      "enabled": true,
      "id": 16,
      "items": [
        {
          "type": "group",
          "name": "system aliases",
          "enabled": true,
          "id": 7,
          "items": [
            {
              "type": "alias",
              "name": "",
              "enabled": true,
              "id": 4,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "prefix_suffix": true,
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.sys.pause();"
                }
              ],
              "text": "pp on"
            },
            {
              "type": "alias",
              "name": "",
              "enabled": true,
              "id": 5,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "prefix_suffix": true,
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.sys.unpause();"
                }
              ],
              "text": "pp off"
            },
            {
              "type": "alias",
              "name": "",
              "enabled": true,
              "id": 3,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "prefix_suffix": true,
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.sys.pauseToggle();"
                }
              ],
              "text": "pp"
            },
            {
              "type": "alias",
              "name": "",
              "enabled": true,
              "id": 271,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "prefix_suffix": true,
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.sys.setTarget(args[1]);"
                }
              ],
              "text": "^tt?\\s+(.+)$"
            },
            {
              "type": "alias",
              "name": "Toggle Health/Mana",
              "enabled": true,
              "id": 324,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "prefix_suffix": true,
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.sys.toggleSystemStatus('sipPriority');"
                }
              ],
              "text": "hh"
            }
          ]
        },
        {
          "type": "group",
          "name": "systemTrigger",
          "enabled": true,
          "id": 277,
          "items": [
            {
              "type": "trigger",
              "name": "SystemOutput Event Trigger",
              "enabled": true,
              "id": 278,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^SystemEvent (.+)$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent(args[1]);\ngag_current_line();"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 363,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "** Illusion **",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.sys.lifevision = true;"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "group",
      "name": "affs",
      "enabled": true,
      "id": 74,
      "items": [
        {
          "type": "group",
          "name": "self affs triggers",
          "enabled": true,
          "id": 89,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 75,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "The fires consuming you diminish somewhat.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('burningAffCountSubtractEvent', 1);"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "group",
      "name": "defs",
      "enabled": true,
      "id": 77,
      "items": [
        {
          "type": "alias",
          "name": "",
          "enabled": true,
          "id": 80,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "script",
              "script": "nexSys.my_defs.defup();"
            }
          ],
          "text": "defup"
        },
        {
          "type": "alias",
          "name": "",
          "enabled": true,
          "id": 81,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "script",
              "script": "nexSys.my_defs.defoff();"
            }
          ],
          "text": "defoff"
        },
        {
          "type": "alias",
          "name": "",
          "enabled": true,
          "id": 376,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "script",
              "script": "nexSys.Defs.density.toggle_default_prio(25);"
            }
          ],
          "text": "ma"
        },
        {
          "type": "alias",
          "name": "",
          "enabled": true,
          "id": 82,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "script",
              "script": "nexSys.Defs.heldbreath.toggle_default_prio(25);"
            }
          ],
          "text": "br"
        },
        {
          "type": "alias",
          "name": "",
          "enabled": true,
          "id": 83,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "script",
              "script": "nexSys.Defs.rebounding.toggle_default_prio(25);"
            }
          ],
          "text": "ss"
        },
        {
          "type": "alias",
          "name": "",
          "enabled": true,
          "id": 84,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "script",
              "script": "nexSys.Defs.cloak.toggle_default_prio(25);"
            }
          ],
          "text": "cl"
        },
        {
          "type": "alias",
          "name": "",
          "enabled": true,
          "id": 85,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "script",
              "script": "nexSys.my_defs.parry(args[1]);\n//CUSTOM\nif (nexSys.EqBalQueue.queue.length>0)\n    nexSys.EqBalQueue.prepend(`parry ${nexSys.limbs.short[args[1]]}`);"
            }
          ],
          "text": "^p(rl|ll|ra|la|h|tt|c|l|r)$"
        },
        {
          "type": "alias",
          "name": "",
          "enabled": true,
          "id": 86,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "script",
              "script": "send_command('unblock');\nnexSys.Defs.blocking.set_default_prio(0);"
            }
          ],
          "text": "ub"
        },
        {
          "type": "alias",
          "name": "",
          "enabled": true,
          "id": 87,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "script",
              "script": "nexSys.Defs.blocking.set_command('block ' +args[1]);\nnexSys.Defs.blocking.set_default_prio(25);"
            }
          ],
          "text": "^block\\s+(\\w+)$"
        },
        {
          "type": "group",
          "name": "Mounted",
          "enabled": true,
          "id": 386,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 387,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You must dismount before you can mount anything else.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('mountedGotDefEvent')"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 388,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^You easily vault onto the back of .+\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('mountedGotDefEvent')"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 390,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^You lose purchase on .+\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('mountedLostDefEvent')"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 395,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^You step down off of .+\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('mountedLostDefEvent')"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 396,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^You are riding a.+\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('mountedGotDefEvent')"
                }
              ]
            }
          ],
          "actions": []
        }
      ]
    },
    {
      "type": "group",
      "name": "balances",
      "enabled": true,
      "id": 76,
      "items": [
        {
          "type": "group",
          "name": "self balance herb",
          "enabled": true,
          "id": 98,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 97,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may eat another plant or mineral.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 99,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a magnesium chip.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'magnesium');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 100,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat an aurum flake.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'aurum');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 101,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a plumbum flake.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'plumbum');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 102,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a stannum flake.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'stannum');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 103,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat an arsenic pellet.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'arsenic');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 104,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a ferrum flake.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'ferrum');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 105,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat an antimony flake.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'antimony');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 106,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a cuprum flake.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'cuprum');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 107,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat an argentum flake.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'argentum');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 108,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a calamine crystal.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'calamine');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 115,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a bloodroot leaf.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'bloodroot');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 116,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a piece of kelp.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'kelp');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 117,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a goldenseal root.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'goldenseal');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 118,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat some prickly ash bark.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'ash');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 119,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat some bayberry bark.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'bayberry');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 120,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a ginseng root.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'ginseng');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 121,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a ginger root.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'ginger');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 122,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a bellwort flower.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'bellwort');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 123,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a lobelia seed.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'lobelia');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 124,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a hawthorn berry.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('herbLostBalEvent', 'hawthorn');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance focus",
          "enabled": true,
          "id": 114,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 113,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Your mind is able to focus once again.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('focusGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 125,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "The blow sets your head to spinning - you cannot concentrate on anything.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('focusLostBalEvent', 'smashHigh');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 126,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You focus your mind intently on curing your mental maladies.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('focusLostBalEvent', 'focus');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 127,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "A diminutive homunculus resembling (\\w+) turns its head towards you, its jaws opening wider than what seems possible\\. The homunculus stares intently at you and lets out an ear\\-piercing shriek that disrupts your thoughts\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('focusLostBalEvent', 'shriek');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 128,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You concentrate, but your mind is too tired to focus.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('focusLostBalEvent', 'alreadyOff');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 129,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^\\w+ swings (his|her) shield around, smashing your temple with a backhanded blow\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('focusLostBalEvent', 'smashHigh');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance sip",
          "enabled": true,
          "id": 130,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 131,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may drink another health or mana elixir.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('sipGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 132,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "The elixir heals and soothes you.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('sipLostBalEvent', 'sipHealth');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 133,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Your mind feels stronger and more alert.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('sipLostBalEvent', 'sipMana');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 134,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^You take some elixir from (.+) and rub it into your (.+)\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('sipLostBalEvent', 'applyHealth'); //add args for limb"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 135,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "The elixir flows down your throat without effect.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('sipLostBalEvent', 'alreadyOff');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 136,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "The health elixir fizzles away without any discernable effect.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('sipLostBalEvent', 'alreadyOff');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance moss",
          "enabled": true,
          "id": 137,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 138,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may eat another bit of irid moss or potash.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('mossGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 139,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You feel your health and mana replenished.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('mossLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 140,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "The potash slides down without effect.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('mossLostBalEvent', 'alreadyOff');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance tree",
          "enabled": true,
          "id": 141,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 142,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may utilise the tree tattoo again.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('treeGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 143,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You touch the tree of life tattoo.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('treeLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 144,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Your tree of life tattoo glows faintly for a moment then fades, leaving you unchanged.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('treeLostBalEvent', 'alreadyOff');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance salve",
          "enabled": true,
          "id": 149,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 150,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may apply another salve to yourself.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('salveGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 151,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "The salve dissolves and quickly disappears after you apply it.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('salveLostBalEvent', 'alreadyOff');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 152,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^\\[Curing\\]\\: APPLY RESTORATION TO (\\w+)$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('salveLostBalEvent', 4);\n"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 155,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^\\[Curing\\]\\: APPLY (MENDING|EPIDERMAL|CALORIC)(.*)$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('salveLostBalEvent', 1);\n"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 377,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^You take out some salve and quickly rub it on your(\\s\\w+)+.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('salveLostBalEvent', 1);"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance immunity",
          "enabled": true,
          "id": 154,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 153,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Your system is able to absorb antidotes once again.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('immunityGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 156,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "The liquid reacts with the substance still present in your system, cancelling itself out.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('immunityLostBalEvent', 'alreadyOff');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 183,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "[Curing]: SIP IMMUNITY",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('immunityLostBalEvent');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance rebounding",
          "enabled": true,
          "id": 158,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 184,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You feel an aura of rebounding surround you.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('reboundingGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 178,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Your aura of weapons rebounding disappears.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('reboundingGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 181,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You puff on the pipe, but your existing aura of weapons rebounding negates any effect.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('reboundingGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 180,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You take a long drag of malachite off your pipe",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('reboundingLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 179,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You take a long drag of skullcap off your pipe.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('reboundingLostBalEvent');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance smoke",
          "enabled": true,
          "id": 159,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 157,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Your lungs have recovered enough to smoke another mineral or plant.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('smokeGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 185,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Your lungs have not yet recovered enough to allow you to smoke.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('smokeLostBalEvent', 'alreadyOff');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 186,
              "matching": "begins",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You take a long drag of",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('smokeLostBalEvent');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance dragonbreath",
          "enabled": true,
          "id": 160,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 182,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Your \\w+ summoning is complete\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('dragonbreathGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 187,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You already have your breath summoned, Wyrm.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('dragonbreathLostBalEvent', 'alreadyOff');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 188,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You feel your eyes begin to blaze as you summon lightning to your belly.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('dragonbreathLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 194,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "With an almost inaudible growl, you begin summoning a fiery inferno into your belly.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('dragonbreathLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 195,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "With a great effort, you begin to summon caustic hell to your innards.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('dragonbreathLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 196,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Flaring your wings and head back, you begin summoning forth the icy cold of the pure, endless void into your belly.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('dragonbreathLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 197,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "With a great shudder, you begin to summon forth the defiling, deadly wyrmvenom of legend.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('dragonbreathLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 198,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Calling upon the vast well of mental power at your disposal, you begin to summon a mind-rending blast of psi energy.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('dragonbreathLostBalEvent');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance deafness",
          "enabled": true,
          "id": 161,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 190,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "The aural world fades to silence.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('deafnessGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 193,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a calamine crystal.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('deafnessLostBalEvent', 'calamine');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 199,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You eat a hawthorn berry.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('deafnessLostBalEvent', 'hawthorn');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance deaf",
          "enabled": true,
          "id": 162,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 192,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You are already deaf.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('deafGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 191,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "The world about you falls silent as the deafness trance sinks upon you.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('deafGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 200,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You stare straight ahead and concentrate on a distant focal point.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('deafLostBalEvent');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance blind",
          "enabled": true,
          "id": 163,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 201,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You are already blind.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('blindGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 202,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You open your eyes once more, and the world about you is darkness.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('blindGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 203,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You close your eyes for a moment.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('blindLostBalEvent');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance speed",
          "enabled": true,
          "id": 164,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 204,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Tiny tremours spread through your body as the world seems to slow down.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('speedGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 205,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "[Curing]: SIP SPEED",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('speedLostBalEvent');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance sileris",
          "enabled": true,
          "id": 165,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 206,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "The quicksilver hardens into a supple metallic shell.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('silerisGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 207,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "The sileris berry juice hardens into a supple purple shell.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('silerisGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 208,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You apply a quicksilver droplet to yourself.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('silerisLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 209,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You apply a sileris berry to yourself.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('silerisLostBalEvent');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance voice",
          "enabled": true,
          "id": 166,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 210,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You have recovered voice balance.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('voiceGotBalEvent');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance tremolo",
          "enabled": true,
          "id": 167,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 211,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may mangle a limb with the vibrato or tremolo once again.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('tremoloGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 222,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^With a trilling vibrato you attack (\\w+)\\'s broken (left|right) arm\\. (He|She) screams in pain\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('tremoloLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 223,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Using a heavy tremolo you brutally punish (\\w+)\\'s already shattered (left|right) leg\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('tremoloLostBalEvent');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance homunculus",
          "enabled": true,
          "id": 168,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 212,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may order your homunculus once more.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('homunculusGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 224,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Focusing your mind on a diminutive homunculus resembling (?:\\w+), you command it to disrupt (?:\\w+)\\'s focus\\. The homunculus turns towards (?:him|her) before letting out an ear\\-piercing shriek\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('homunculusLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 225,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You are unable to order your homunculus again so soon.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('homunculusLostBalEvent', 'alreadyOff');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance fitness",
          "enabled": true,
          "id": 169,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 213,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may purge your lungs once again.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('fitnessGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 226,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You inhale deeply, purging yourself of your asthmatic condition.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('fitnessLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 227,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may not purge your lungs again as of this time.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('fitnessLostBalEvent', 'alreadyOff');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance bloodboil",
          "enabled": true,
          "id": 170,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 214,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may boil your blood once again.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('bloodboilGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 228,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You summon spirits of fire to burn off that which afflicts you.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('bloodboilLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 229,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You have not recovered enough to boil your blood again as of yet.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('bloodboilLostBalEvent', 'alreadyOff');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance dragonheal",
          "enabled": true,
          "id": 171,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 215,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may purge your great form of afflictions once again.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('dragonhealGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 230,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You let out a great keening, and cast the impurities from your form.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('dragonhealLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 231,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You have not yet recovered enough to purge your great form of afflictions.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('dragonhealLostBalEvent', 'alreadyOff');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 232,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Your mind and body are too disjointed to invoke your healing powers, wyrm.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('dragonhealLostBalEvent', 'alreadyOff');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance rage",
          "enabled": true,
          "id": 172,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 216,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may channel your rage to cure your afflictions once again.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('rageGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 233,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You allow your pent-up rage to vent and your eyes flash dangerously.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('rageLostBalEvent');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance salt",
          "enabled": true,
          "id": 173,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 217,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Directing the energy of salt, you surround yourself with a primal aura, purging yourself of ailments.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('saltLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 234,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may channel alchemical energy to heal yourself once again.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('saltGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 235,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You have not recovered enough to heal yourself with alchemical energy once again.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('saltLostBalEvent', 'alreadyOff');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance shrugging",
          "enabled": true,
          "id": 174,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 218,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Your body has recovered enough to shrug afflictions once again.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('shruggingGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 236,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Focusing inward, you purge your body of afflictions.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('shruggingLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 237,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may not shrug again so soon.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('shruggingLostBalEvent', 'alreadyOff');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance fool",
          "enabled": true,
          "id": 175,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 219,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may heal another affliction.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('foolGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 238,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You press the Fool tarot to your forehead.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('foolLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 239,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "The Fool has no effect on you.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('foolLostBalEvent', 'alreadyOff');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance writhe",
          "enabled": true,
          "id": 176,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 220,
              "matching": "begins",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You have writhed free",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('writheGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 240,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You begin to writhe helplessly, throwing your body off balance.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('writheGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 241,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You begin to struggle free of your entanglement.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('writheLostBalEvent', 'entangled');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 242,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You begin trying to wrest your mind free of that which has transfixed it.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('writheLostBalEvent', 'transfixation');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 243,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You twist and turn as you attempt to escape from your entanglement.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('writheLostBalEvent', 'alreadyOff');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 244,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You continue trying to wrest your mind free.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('writheLostBalEvent', 'alreadyOff');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance impalewrithe",
          "enabled": true,
          "id": 177,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 221,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "With an heroic effort you manage to writhe yourself free from the weapon that impaled you.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('writheGotBalEvent', 'impale');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 245,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^With a vicious snarl \\w+ carves a merciless swathe through your steaming guts\\. You gurgle and choke as s?he withdraws (his|her) dripping blade, glistening with gore\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('writheGotBalEvent', 'impale');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 246,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Searing pain tears through your midsection as you wrench away from ([A-Z][a-z]+), (his|her) weapon ripping unceremoniously through your innards\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('writheGotBalEvent', 'impale');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 247,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^With a snarl of contempt, \\w+ allows you to slide free of (her|his) weapon\\.$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('writheGotBalEvent', 'impale');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 248,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You begin to writhe furiously to escape the blade that has impaled you.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('writheLostBalEvent', 'impale');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance alleviate",
          "enabled": true,
          "id": 353,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 354,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may purge your body of afflictions once again.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('alleviateGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 355,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "There are no pesky afflictions keeping you from your destiny, Warrior.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('alleviateLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 356,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "Applying your knowledge of anatomy, you massage pressure points with your fingers, and a flood of relief courses through your body.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('alleviateLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 357,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You are too exhausted to purge your body of afflictions.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('alleviateLostBalEvent', 'alreadyOff');"
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "name": "self balance slough (custom)",
          "enabled": true,
          "id": 378,
          "items": [
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 379,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You allow your outer layers to slough away, their fires extinguished along with the impurities contaminating them.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('sloughLostBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 380,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may slough off the impurities that plague you once again.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('sloughGotBalEvent');"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "",
              "enabled": true,
              "id": 381,
              "matching": "exact",
              "whole_words": true,
              "case_sensitive": true,
              "text": "You may not slough off the impurities again quite yet.",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('sloughLostBalEvent', 'alreadyOff');"
                }
              ]
            }
          ],
          "actions": []
        }
      ]
    },
    {
      "type": "group",
      "name": "cache",
      "enabled": true,
      "id": 325,
      "items": [
        {
          "type": "alias",
          "name": "",
          "enabled": true,
          "id": 365,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "command",
              "command": "inr all",
              "prefix_suffix": true
            },
            {
              "action": "command",
              "command": "put gold in pack",
              "prefix_suffix": true
            }
          ],
          "text": "inra"
        }
      ]
    },
    {
      "type": "group",
      "name": "lust",
      "enabled": true,
      "id": 335,
      "items": [
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 337,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^(\\w+) quickly flings a tarot card at you, and you feel unreasonable lust for (?:him|her)\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('LustGotEvent', args[1]);"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 338,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^You reject the friendship of (\\w+)\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('LustLostEvent', args[1]);"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 339,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "Whom do you wish to reject?",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('LustNoneEvent');"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 340,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^Why would you reject (\\w+)\\?$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('LustLostEvent', args[1]);"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 366,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^You feel an unusually strong lust for (\\w+)\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('LustGotEvent', args[1]);"
            }
          ]
        }
      ],
      "actions": []
    },
    {
      "type": "group",
      "name": "serverside",
      "enabled": true,
      "id": 267,
      "items": [
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 358,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^Your current separator is\\: (.+)$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('CommandSeparatorSetOnStartup', args[1]);"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Priority Set Affliction",
          "enabled": true,
          "id": 280,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^You have set the \\'(\\w+)\\' affliction to the (\\d+) priority\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideAffPrioritySetEvent', {'aff': args[1], 'prio': parseInt(args[2])});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Priority Set Defence",
          "enabled": true,
          "id": 281,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^You have set the \\'(\\w+)\\' defence to the (\\d+) priority\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideDefPrioritySetEvent', {'def': args[1], 'prio': parseInt(args[2])});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Defence Priority List Start",
          "enabled": true,
          "id": 282,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "Your defence priorities for curing set current:",
          "actions": [
            {
              "action": "enable",
              "type": "trigger",
              "name": "Curing Defence Priority List Line"
            },
            {
              "action": "script",
              "script": "let defenceListEnd = () => {\n    client.reflex_disable(client.reflex_find_by_name(\"trigger\", \"Curing Defence Priority List Line\", true, true, \"Nexsys\"))\n    nexSys.eventStream.removeListener('PromptEvent', 'defenceListEnd');\n}\nnexSys.eventStream.registerEvent('PromptEvent', defenceListEnd);"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Defence Priority List Line",
          "enabled": true,
          "id": 283,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^(\\w+)\\s*:\\s*(\\d+)\\s*$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('CuringPriorityDefsEvent', {def: args[1], prio: parseInt(args[2])});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Affliction Priority List Start",
          "enabled": true,
          "id": 284,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "Your affliction curing priorities for the priority set current:",
          "actions": [
            {
              "action": "enable",
              "type": "trigger",
              "name": "Curing Affliction Priority List Line"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Affliction Priority List Line",
          "enabled": false,
          "id": 285,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^(\\d+)\\:\\s*(.*)$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('CuringPriorityAffsEvent', {affs: args[2], prio: parseInt(args[1])});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Affliction Priority End Line",
          "enabled": true,
          "id": 364,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "Affs with priority 26 are ignored.",
          "actions": [
            {
              "action": "disable",
              "type": "trigger",
              "name": "Curing Affliction Priority List Line"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 401,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "Curing Status:",
          "actions": [
            {
              "action": "enable",
              "type": "group",
              "name": "Curing Status"
            }
          ]
        },
        {
          "type": "group",
          "name": "Curing Status",
          "enabled": false,
          "id": 400,
          "items": [
            {
              "type": "trigger",
              "name": "Curing Status Paused",
              "enabled": true,
              "id": 290,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Enabled\\:\\s+(Yes|No)$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'paused', arg: args[1] != \"Yes\"});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Method",
              "enabled": true,
              "id": 291,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Curing Method\\:\\s+(\\w+)$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'curingMethod', arg: args[1]});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Sip Priority",
              "enabled": true,
              "id": 292,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Health\\/Mana Priority\\:\\s+(Health|Mana)$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'sipPriority', arg: args[1]});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Sip Health At",
              "enabled": true,
              "id": 293,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Sip health at\\:\\s+(\\d+)\\%$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'sipHealthAt', arg: parseInt(args[1])});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Sip Mana At",
              "enabled": true,
              "id": 294,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Sip mana at\\:\\s+(\\d+)\\%$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'sipManaAt', arg: parseInt(args[1])});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Moss Health At",
              "enabled": true,
              "id": 295,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Eat moss below health\\:\\s+(\\d+)\\%$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'mossHealthAt', arg: parseInt(args[1])});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Moss Mana At",
              "enabled": true,
              "id": 296,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Eat moss below mana\\:\\s+(\\d+)\\%$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'mossManaAt', arg: parseInt(args[1])});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Focus",
              "enabled": true,
              "id": 297,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Use focus\\:\\s+(Yes|No)$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'focus', arg: args[1]});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Focus Over Herbs",
              "enabled": true,
              "id": 298,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Focus over herbs\\:\\s+(Yes|No)$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'focusOverHerbs', arg: args[1]});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Clot",
              "enabled": true,
              "id": 300,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Use clot\\:\\s+(Yes|No)$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'clot', arg: args[1]});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Tree",
              "enabled": true,
              "id": 299,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Use tree\\:\\s+(Yes|No)$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'tree', arg: args[1]});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Clot At",
              "enabled": true,
              "id": 301,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Clot at\\:\\s+(\\d+) bleeding$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'clotAt', arg: parseInt(args[1])});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Insomnia",
              "enabled": true,
              "id": 302,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Use insomnia\\:\\s+(Yes|No)$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'insomnia', arg: args[1]});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Fractures Above",
              "enabled": true,
              "id": 303,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Will cure fractures above\\:\\s+(\\d+)\\% health$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'fracturesAbove', arg: parseInt(args[1])});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Mana Abilities Above",
              "enabled": true,
              "id": 304,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Will use mana above\\:\\s+(\\d+)\\% mana$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'manaAbilitiesAbove', arg: parseInt(args[1])});"
                }
              ]
            },
            {
              "type": "trigger",
              "name": "Curing Status Curing Batch",
              "enabled": true,
              "id": 305,
              "matching": "regexp",
              "whole_words": true,
              "case_sensitive": true,
              "text": "^Batch actions\\:\\s+(Yes|No)$",
              "actions": [
                {
                  "action": "script",
                  "script": "nexSys.eventStream.raiseEvent('CuringStatusEvent', {status: 'batch', arg: args[1]});"
                },
                {
                  "action": "disable",
                  "type": "group",
                  "name": "Curing Status"
                }
              ]
            }
          ],
          "actions": []
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Paused",
          "enabled": true,
          "id": 307,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^Curing (activated|disabled)\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'paused', arg: args[1]});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Curing Method Transmutation",
          "enabled": true,
          "id": 308,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "You will now use transmutation cures.",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'cureMethod', arg: 'Transmutation'});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Curing Method Concoctions",
          "enabled": true,
          "id": 309,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "You will now use concoction-based cures.",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'cureMethod', arg: 'Concoctions'});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Curing Sip Priority",
          "enabled": true,
          "id": 310,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^Curing will now prioritise (mana|health) over (mana|health)\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'sipPriority', arg: args[1].toProperCase()});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Curing Sip At",
          "enabled": true,
          "id": 311,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^(Health|Mana) curing threshold set to (\\d+)\\%\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'sip'+args[1]+'At', arg: parseInt(args[2])});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Curing Moss At",
          "enabled": true,
          "id": 312,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^Moss (health|mana) curing threshold set to (\\d+)\\%\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'moss'+args[1].toProperCase()+'At', arg: parseInt(args[2])});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Curing Focus",
          "enabled": true,
          "id": 313,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^Automatic usage of focusing (activated|disabled)\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'focus', arg: args[1]});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Curing Focus Over Herbs",
          "enabled": true,
          "id": 314,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^You will now prioritise (focus|herbs) over (focus|herbs)\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'focusOverHerbs', arg: args[1] == \"focus\"});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Tree",
          "enabled": true,
          "id": 306,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^Automatic usage of the tree tattoo (activated|disabled)\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'tree', arg: args[1]});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Clot On",
          "enabled": true,
          "id": 315,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^You will now attempt to clot your wounds\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'clot', arg: true});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Clot Off",
          "enabled": true,
          "id": 316,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^You will no longer attempt to clot your wounds\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'clot', arg: false});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Clot At",
          "enabled": true,
          "id": 317,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^Will clot above (\\d+) bleeding\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'clotAt', arg: parseInt(args[1])});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Insomnia On",
          "enabled": true,
          "id": 318,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "You will now use the insomnia ability.",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'insomnia', arg: true});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Insomnia Off",
          "enabled": true,
          "id": 319,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "You will now not use the insomnia ability.",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'insomnia', arg: false});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Fractures Above",
          "enabled": true,
          "id": 320,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^Will cure health based afflictions above (\\d+)\\%\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'fracturesAbove', arg: parseInt(args[1])});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Mana Abilities Above",
          "enabled": true,
          "id": 321,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^You will now use mana if above (\\d+)\\% of your maximum mana reserves\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'manaAbilitiesAbove', arg: parseInt(args[1])});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Batch On",
          "enabled": true,
          "id": 322,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "You will now attempt to cure multiple things at once.",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'batch', arg: true});"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "Curing Status Set Batch Off",
          "enabled": true,
          "id": 323,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "You will now cure one thing at a time.",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('ServersideCuringStatusSetEvent', {status: 'batch', arg: false});"
            }
          ]
        }
      ]
    },
    {
      "type": "group",
      "name": "PrioritySwapping",
      "enabled": true,
      "id": 359,
      "items": [
        {
          "type": "function",
          "name": "ServersidePrioritySwapping",
          "enabled": true,
          "id": 360,
          "code": "let isClass = nexSys.sys.isClass;\nlet checkOnPrompt = false;\n\nlet aeonSwapGot = function() {\n    let affs = nexSys.Affs;\n    nexSys.sendInline([\n        \"curing siphealth 30\",\n        \"curing sipmana 10\",\n        \"curing mosshealth 0\",\n        \"curing mossmana 0\",\n        \"curing batch off\",\n        \"curing clotat 5000\"]);\n    affs.asthma.set_prio(3);\n    affs.weariness.set_prio(4);\n    affs.anorexia.set_prio(5);\n    affs.impatience.set_prio(7);\n    affs.paralysis.set_prio(8);\n};\n\nlet aeonSwapLost = function() {\n    let affs = nexSys.Affs;\n    let settings = nexSys.sys.state;\n    nexSys.sendInline([\n        \"curing siphealth \"+settings.sipHealthAt,\n        \"curing sipmana \"+settings.sipManaAt,\n        \"curing mosshealth \"+settings.mossHealthAt,\n        \"curing mossmana \"+settings.mossManaAt,\n        \"curing batch on\",\n        \"curing clotat \"+settings.clotAt]);\n    affs.asthma.reset_prio();\n    affs.weariness.reset_prio();\n    affs.anorexia.reset_prio();\n    affs.impatience.reset_prio();\n    affs.paralysis.reset_prio();\n};\n// CUSTOM\n//nexSys.eventStream.registerEvent('AffGot', aeonSwapGot);\n//nexSys.eventStream.registerEvent('AffLost', aeonSwapLost);\nnexSys.eventStream.registerEvent('aeonGotAffEvent', aeonSwapGot);\nnexSys.eventStream.registerEvent('aeonLostAffEvent', aeonSwapLost);\n\nlet checkFocusSwapLost = function() {\n    let affs = nexSys.Affs;\n    affs.stupidity.set_prio(9);\n    affs.recklessness.set_prio(12);\n    affs.dizziness.set_prio(14);\n    affs.shyness.set_prio(14);\n};\n\nlet checkFocusSwapGot = function() {\n    let affs = nexSys.Affs;\n    affs.stupidity.reset_prio();\n    affs.recklessness.reset_prio();\n    affs.dizziness.reset_prio();\n    affs.shyness.reset_prio();\n};\n\n// CUSTOM\n//nexSys.eventStream.registerEvent('BalanceLost', checkFocusSwapLost);\n//nexSys.eventStream.registerEvent('BalanceGot', checkFocusSwapGot);\nnexSys.eventStream.registerEvent('focusLostBalEvent', checkFocusSwapLost);\nnexSys.eventStream.registerEvent('focusGotBalEvent', checkFocusSwapGot);\n\n\nlet checkPrioritySwaps = function(arg) {\n    \n    if(checkOnPrompt) {\n        \n        checkOnPrompt = false;\n        let affs = nexSys.Affs;\n\n        // Scytherus\n        if (nexSys.haveAffs(['scytherus', 'paralysis'])) {\n            affs.scytherus.set_prio(2);\n        }\n        else {\n            affs.scytherus.reset_prio();\n        }\n\n        // Confusion and Disrupt\n        if (nexSys.haveAffs(['confusion', 'disrupted']) && (nexSys.haveBal('focus') || nexSys.haveAff('impatience')) && !nexSys.haveAff('whisperingmadness')) {\n            affs.confusion.set_prio(2);\n        }\n        else {\n            affs.confusion.reset_prio();\n        }\n\n        if (nexSys.haveAff('impatience') && nexSys.snapTrack.have && nexSys.snapTrack.elapsed() < 8000) {\n            affs.impatience.set_prio(2);\n        }\n        else {\n            affs.impatience.reset_prio();\n        }\n\n        if (nexSys.haveAffs(['impatience', 'hypochondria'])) {\n            affs.hypochondria.set_prio(1);\n        }\n        else if (nexSys.haveAff('hypochondria') && nexSys.snapTrack.have && nexSys.snapTrack.elapsed() < 8000) {\n            affs.hypochondria.set_prio(2);\n        }\n        else {\n            affs.hypochondria.reset_prio();\n        }\n\n        if (nexSys.haveAffs(['slickness', 'asthma']) && nexSys.haveAnAff(['sensitivity', 'clumsiness', 'weariness', 'hypochondria']) && !affs.anorexia.have) {\n            affs.slickness.set_prio(2);\n        }\n        else {\n            affs.slickness.reset_prio();\n        }\n\n        if (nexSys.haveAffs(['slickness', 'asthma']) && !nexSys.haveAnAff(['sensitivity', 'clumsiness', 'weariness', 'hypochondria'])) {\n            affs.asthma.set_prio(2);\n        }\n        else if (nexSys.haveAffs(['hellsight', 'asthma'])) {\n            affs.asthma.set_prio(2);\n        }\n        else {\n            affs.asthma.reset_prio();\n        }\n\n        if (affs.darkshade.have && affs.darkshade.elapsed() > 10000 && nexSys.roomItems['a lightwall']) {\n            affs.darkshade.set_prio(2);\n        }\n        else {\n            affs.darkshade.reset_prio();\n        }\n\n        if (nexSys.haveAffs(['prone', 'sensitivity']) && nexSys.haveAnAff(['damagedleftleg', 'damagedrightleg'])) {\n            affs.sensitivity.set_prio(2);\n        }\n        else {\n            affs.sensitivity.reset_prio();\n        }\n\n        if (nexSys.haveAff('conflagration') && nexSys.haveAnAff(['brokenleftleg', 'brokenrightleg', 'damagedleftleg', 'damagedrightleg', 'mangledleftleg', 'mangledrightleg'])) {\n            if (nexSys.haveAff('prone') && !nexSys.haveAnAff(['damagedleftleg', 'damagedrightleg', 'mangledleftleg', 'mangledrightleg'])) {\n                affs.burning.set_prio(7);\n            }\n            else {\n                affs.burning.set_prio(4);\n            }\n        }\n        else {\n            affs.burning.reset_prio();\n        }\n/* CUSTOM Insulation not an aff\n        if (nexSys.haveAff('timeflux')) {\n            if (nexSys.haveAff('prone') && !nexSys.haveAnAff(['damagedleftleg', 'damagedrightleg', 'mangledleftleg', 'mangledrightleg'])) {\n                affs.insulation.set_prio(7);\n            }\n            else {\n                affs.insulation.set_prio(4);\n            }\n        }\n        else {\n            affs.insulation.reset_prio();\n        }\n*/\n        if (affs.cadmuscurse.have) {\n            affs.vertigo.set_prio(4);\n        }\n        else {\n            affs.vertigo.reset_prio();\n        }\n\n        // add vivi and heartseed curing here\n        if (affs.prone.have && (nexSys.haveAnAff(['damagedleftleg', 'damagedrightleg', 'mangledleftleg', 'mangledrightleg']) || nexSys.haveAffs(['brokenrightleg', 'brokenleftleg']))) {\n            /*affs.damagedleftleg.set_prio(6);\n            affs.damagedrightleg.set_prio(6);\n            affs.mangledleftleg.set_prio(6);\n            affs.mangledrightleg.set_prio(6); CUSTOM*/\n        }\n        else {\n            /*affs.damagedleftleg.reset_prio();\n            affs.damagedrightleg.reset_prio();\n            affs.mangledleftleg.reset_prio();\n            affs.mangledrightleg.reset_prio(); CUSTOM*/\n        }\n\n        // Fitness\n        if (isClass(['Runewarden', 'Monk', 'Blademaster', 'Infernal', 'Paladin', 'Sentinel', 'Druid'])) {\n            if (nexSys.haveAff('asthma')) {\n                if (nexSys.haveAnAff(['slickness', 'hellsight']) && nexSys.haveAnAff(['paralysis', 'clumsiness', 'sensitivity'])) {\n                    nexSys.Cures.fitness.set_prio(100);\n                }\n                else if (nexSys.haveAnAff(['damagedhead', 'mangledhead', 'damagedleftleg', 'damagedrightleg']) && nexSys.haveAnAff(['paralysis', 'clumsiness', 'sensitivity', 'slickness', 'hellsight', 'disloyalty'])) {\n                    nexSys.Cures.fitness.set_prio(100);\n                }\n                else {\n                    nexSys.Cures.fitness.reset_prio();\n                }\n            }\n            else {\n                nexSys.Cures.fitness.reset_prio();\n            }\n        }\n        else {\n            nexSys.Cures.fitness.reset_prio();\n        }\n\n        // Dragon\n        if (isClass('Dragon')) {\n            // Dragonheal\n\n            if (nexSys.haveAffs([\"asthma\", \"slickness\", \"anorexia\"]) && (!nexSys.haveBal(\"focus\") || nexSys.haveAff(\"impatience\"))) {\n                nexSys.Cures.dragonheal.set_prio(100);\n            }\n            else {\n                nexSys.Cures.dragonheal.reset_prio();\n            }\n\n            // Dragonflex\n\n            if (nexSys.haveAffs([\"entangled\", \"webbed\"])) {\n                nexSys.Cures.dragonflex.set_prio(100);\n            }\n            else if (nexSys.haveAnAff(['entangled', 'webbed'])) {\n                if (nexSys.haveBal(\"balance\") && !nexSys.haveBal(\"writhe\") || nexSys.haveAff('transfixation')) {\n                    nexSys.Cures.dragonflex.set_prio(100);\n                }\n                else {\n                    nexSys.Cures.dragonflex.reset_prio();\n                }\n            }\n            else {\n                nexSys.Cures.dragonflex.reset_prio();\n            }\n        }\n        else {\n            nexSys.Cures.dragonflex.reset_prio();\n            nexSys.Cures.dragonheal.reset_prio();\n        }\n\n        // Magi\n        if (isClass('Magi')) {\n            // Bloodboil\n            if (nexSys.haveAffs(['asthma', 'slickness'])) {\n                if (nexSys.haveAnAff(['hypochondria', 'paralysis']) || (nexSys.haveAff('anorexia') && (!nexSys.haveBal(\"focus\") || nexSys.haveAff(\"impatience\")))) {\n                    nexSys.Cures.bloodboil.set_prio(100);\n                }\n                else {\n                    nexSys.Cures.bloodboil.reset_prio();\n                }\n            }\n            else {\n                nexSys.Cures.bloodboil.reset_prio();\n            }\n        }\n        else {\n            nexSys.Cures.bloodboil.reset_prio();\n        }\n\n\n        // Bard\n        if (isClass('Bard')) {\n            // Dwinnu\n            if (nexSys.haveAffs(['webbed', 'entangled'])) {\n                nexSys.Cures.dwinnu.set_prio(100);\n            }\n            else if (nexSys.haveAnAff(['webbed', 'entangled']) && nexSys.haveAff('transfixation')) {\n                nexSys.Cures.dwinnu.set_prio(100);\n            }\n            else {\n                nexSys.Cures.dwinnu.reset_prio();\n            }\n        }\n        else {\n            nexSys.Cures.dwinnu.reset_prio();\n        }\n\n        // Alchemist\n        if (isClass('Alchemist')) {\n            // Salt\n            if (nexSys.haveAffs(['asthma', 'slickness', 'anorexia']) && (!nexSys.haveBal(\"focus\") || nexSys.haveAff(\"impatience\"))) {\n                nexSys.Cures.salt.set_prio(100);\n            }\n            else if (nexSys.haveAffs(['asthma', 'slickness', 'hypochondria']) || nexSys.haveAffs(['asthma', 'slickness', 'paralysis'])) {\n                nexSys.Cures.salt.set_prio(100);\n            }\n            else {\n                nexSys.Cures.salt.reset_prio();\n            }\n        }\n        else {\n            nexSys.Cures.salt.reset_prio();\n        }\n\n        // Serpent\n        if (isClass('Serpent')) {\n            // Shrugging\n            if (nexSys.haveAffs(['asthma', 'slickness', 'anorexia']) && (!nexSys.haveBal(\"focus\") || nexSys.haveAff(\"impatience\"))) {\n                nexSys.Cures.shrugging.set_prio(100);\n            }\n            else if (nexSys.haveAffs(['asthma', 'slickness', 'hypochondria']) || nexSys.haveAffs(['asthma', 'slickness', 'paralysis'])) {\n                nexSys.Cures.shrugging.set_prio(100);\n            }\n            else {\n                nexSys.Cures.shrugging.reset_prio();\n            }\n        }\n        else {\n            nexSys.Cures.shrugging.reset_prio();\n        }\n\n        // Occultist\n        if (isClass('Occultist')) {\n            // Fool\n            if (nexSys.haveAffs(['asthma', 'slickness', 'anorexia']) && (!nexSys.haveBal(\"focus\") || nexSys.haveAff(\"impatience\"))) {\n                nexSys.Cures.fool.set_prio(100);\n            }\n            else if (nexSys.haveAffs(['asthma', 'slickness', 'hypochondria']) || nexSys.haveAffs(['asthma', 'slickness', 'impatience'])) {\n                nexSys.Cures.fool.set_prio(100);\n            }\n            else {\n                nexSys.Cures.fool.reset_prio();\n            }\n        }\n        else {\n            nexSys.Cures.fool.reset_prio();\n        }\n\n        // Blademaster\n        if (isClass('Blademaster')) {\n            // Alleviate\n            if (nexSys.haveAffs(['asthma', 'slickness', 'anorexia']) && (!nexSys.haveBal(\"focus\") || nexSys.haveAff(\"impatience\"))) {\n                nexSys.Cures.alleviate.set_prio(100);\n            }\n            else if (nexSys.haveAffs(['asthma', 'slickness', 'hypochondria']) || nexSys.haveAffs(['asthma', 'slickness', 'impatience'])) {\n                nexSys.Cures.alleviate.set_prio(100);\n            }\n            else {\n                nexSys.Cures.alleviate.reset_prio();\n            }\n        }\n        else {\n            nexSys.Cures.alleviate.reset_prio();\n        }\n    }\n};\n\nlet checkPrioritySwapsOnPrompt = function() {\n    checkOnPrompt = true;\n};\n\nnexSys.eventStream.registerEvent('PromptEvent', checkPrioritySwaps);\nnexSys.eventStream.registerEvent('AffGot', checkPrioritySwapsOnPrompt);\nnexSys.eventStream.registerEvent('AffLost', checkPrioritySwapsOnPrompt);\nnexSys.eventStream.registerEvent('BalanceLost', checkPrioritySwapsOnPrompt); \nnexSys.eventStream.registerEvent('BalanceGot', checkPrioritySwapsOnPrompt);\nnexSys.eventStream.registerEvent('ClassChanged', checkPrioritySwapsOnPrompt);\n\n\nlet cadmusGained = function(aff) {\n    if(aff.name == \"cadmuscurse\") {\n        nexSys.sendCmd('curing focus off');\n    }\n};\n\nlet cadmusLost = function(aff) {\n    if(aff.name == \"cadmuscurse\") {\n        nexSys.sendCmd('curing focus on');\n    }\n};\nnexSys.eventStream.registerEvent('cadmusGotAffEvent', cadmusGained);\nnexSys.eventStream.registerEvent('cadmusLostAffEvent', cadmusLost);"
        },
        {
          "type": "function",
          "name": "PrioSwapTrackables",
          "enabled": true,
          "id": 361,
          "code": "let isTarget = nexSys.sys.isTarget;\nnexSys.snapTrack = new nexSys.Trackable('Snapped');\nnexSys.heartseedMode = false;\nnexSys.viviMode = false;\n\nlet gotSnapped = function(person) {\n    if(isTarget(person)) {\n        nexSys.eventStream.raiseEvent('SnappedGotTrackableEvent');\n    }\n};\n\n\nnexSys.eventStream.registerEvent('GotSnappedEvent', gotSnapped);"
        },
        {
          "type": "trigger",
          "name": "Got snapped",
          "enabled": true,
          "id": 362,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^(\\w+) snaps (?:his|her) fingers in front of you\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('GotSnappedEvent', args[1]);"
            }
          ]
        }
      ]
    },
    {
      "type": "group",
      "name": "utility",
      "enabled": true,
      "id": 110,
      "items": [
        {
          "type": "alias",
          "name": "",
          "enabled": true,
          "id": 94,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "script",
              "script": "run_function('onLoad', {}, 'nexSys2.0');"
            }
          ],
          "text": "sysload"
        },
        {
          "type": "alias",
          "name": "",
          "enabled": true,
          "id": 109,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "script",
              "script": "console.log(client[args[1]]);\ndisplay_notice(client[args[1]]);"
            }
          ],
          "text": "^display\\s+(\\w+)$"
        },
        {
          "type": "alias",
          "name": "raiseEvent Alias",
          "enabled": true,
          "id": 279,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent(args[1]);"
            }
          ],
          "text": "^event\\s+(\\w+)$"
        },
        {
          "type": "alias",
          "name": "logging on/off",
          "enabled": true,
          "id": 289,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "prefix_suffix": true,
          "actions": [
            {
              "action": "script",
              "script": "print(\"logging alias \" +args[1]);\nnexSys.sysLoggingToggle(args[1]);"
            }
          ],
          "text": "^logging(on|off)$"
        }
      ]
    },
    {
      "type": "group",
      "name": "queueing",
      "enabled": true,
      "id": 269,
      "items": [
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 345,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "Your eqbal queue is already empty.",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.EqBalQueue.clear()"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 393,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "Your class balance queue is already empty.",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.ClassQueue.clear();"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 346,
          "matching": "exact",
          "whole_words": true,
          "case_sensitive": true,
          "text": "[System]: Queued eqbal commands cleared.",
          "actions": [
            {
              "action": "script",
              "script": "//Enter the script here"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 347,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^\\[System\\]: Added ((?:\\w+\\|?)+) to your eqbal queue\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('eqbalQueueSent', args[1].split(nexSys.sys.settings.sep));"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 391,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^\\[System\\]\\: Added (.+) to your class specific queue\\.$",
          "actions": [
            {
              "action": "script",
              "script": "nexSys.eventStream.raiseEvent('classQueueSent', args[1].split(nexSys.sys.settings.sep));"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 382,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^\\[System\\]: Running queued eqbal command:",
          "actions": [
            {
              "action": "script",
              "script": "if (nexSys.Bals.balance.duration > 0.25 && nexSys.haveBal('balance') == false) {\n    nexSys.eventStream.raiseEvent('balanceGotBalEvent');\n    nexSys.eventStream.raiseEvent('balanceLostBalEvent');\n}\nif (nexSys.Bals.equilibrium.duration > 0.25 && nexSys.haveBal('equilibrium') == false) {\n    nexSys.eventStream.raiseEvent('equilibriumGotBalEvent');\n    nexSys.eventStream.raiseEvent('equilibriumLostBalEvent');\n}\nnexSys.eventStream.raiseEvent('eqBalQueueFired', nexSys.EqBalQueue);"
            }
          ]
        },
        {
          "type": "trigger",
          "name": "",
          "enabled": true,
          "id": 392,
          "matching": "regexp",
          "whole_words": true,
          "case_sensitive": true,
          "text": "^\\[System\\]: Running queued class command:",
          "actions": [
            {
              "action": "script",
              "script": "if (nexSys.Bals.entity.duration > 0.5 && nexSys.haveBal('entity') == false) {\n    nexSys.eventStream.raiseEvent('entityGotBalEvent');\n    nexSys.eventStream.raiseEvent('entityLostBalEvent');\n}\n\nnexSys.eventStream.raiseEvent('classQueueFired', nexSys.ClassQueue);"
            }
          ]
        }
      ]
    },
    {
      "type": "group",
      "name": "classes",
      "enabled": true,
      "id": 398,
      "items": [
        {
          "type": "function",
          "name": "occultist",
          "enabled": true,
          "id": 399,
          "code": "// Function for handling entity balance and karma tracking\n\nlet occultistStatsGmcpBalance = function(vitals) {\n    if (!nexSys.sys.isClass('Occultist')) { return; }\n    \n    let re = /Karma: (\\d+)%/g;\n    let re2 = /(\\d+)/g;\n    if (vitals.charstats.length > 2 && vitals.charstats[2].match(re)) {\n    \tnexSys.sys.char.karma = parseInt(vitals.charstats[2].match(re2)[0]);\n    }\n    if (vitals.charstats.includes(\"Entity: Yes\") && !nexSys.Bals[\"entity\"].have) {\n        nexSys.eventStream.raiseEvent('entityGotBalEvent');\n    }\n    else if (vitals.charstats.includes(\"Entity: No\") && nexSys.Bals[\"entity\"].have) {\n    \tnexSys.eventStream.raiseEvent('entityLostBalEvent');\n    }\n};\nnexSys.eventStream.registerEvent('Char.Vitals', occultistStatsGmcpBalance);"
        }
      ],
      "actions": []
    },
    {
      "type": "alias",
      "name": "",
      "enabled": true,
      "id": 375,
      "matching": "begins",
      "whole_words": true,
      "case_sensitive": true,
      "prefix_suffix": true,
      "actions": [
        {
          "action": "script",
          "script": "GMCP.Items = {\n\troom: [],\n    inv: []\n};\nnexSys.eventStream.removeListener('Char.Items.Add', 'addedItem');\nnexSys.eventStream.removeListener('Char.Items.Remove', 'removedItem');\nnexSys.eventStream.removeListener('Char.Items.List', 'listItems');\nnexSys.eventStream.removeListener('Char.Items.Update', 'updatedItem');\n\nlet addedItem = function(args) {\n    if(args.location == \"room\") {\n        GMCP.Items.room.push(args.item)\n        nexSys.eventStream.raiseEvent('ItemAddedToRoom', args.item);\n    }\n    else if(args.location == \"inv\") {\n        GMCP.Items.inv.push(args.item)\n        nexSys.eventStream.raiseEvent('ItemAddedToInv', args.item);\n    }\n};\n\nnexSys.eventStream.registerEvent('Char.Items.Add', addedItem);\n\nlet removedItem = function(args) {\n    if(args.location == \"room\") {\n        GMCP.Items.room.splice(GMCP.Items.room.findIndex(e=>e.id == args.item.id), 1);\n        nexSys.eventStream.raiseEvent('ItemRemovedFromRoom', args.item);\n    }\n    else if(args.location == \"inv\") {\n        GMCP.Items.inv.splice(GMCP.Items.inv.findIndex(e=>e.id == args.item.id), 1);\n        nexSys.eventStream.raiseEvent('ItemRemovedFromInv', args.item);\n    }\n};\n\nnexSys.eventStream.registerEvent('Char.Items.Remove', removedItem);\n\nlet updatedItem = function(args) {\n    if(args.location == \"room\") {\n        GMCP.Items.room[GMCP.Room.items.findIndex(e=>e.id == args.item.id)] = args.item;\n        nexSys.eventStream.raiseEvent('ItemUpdatedRoom', args.item);\n    }\n    else if(args.location == \"inv\") {\n        console.log(GMCP.Items.inv.findIndex(e=>e.id == args.item.id));\n        console.log(GMCP.Items.inv[GMCP.Items.inv.findIndex(e=>e.id == args.item.id)]);\n        GMCP.Items.inv[GMCP.Items.inv.findIndex(e=>e.id == args.item.id)] = args.item;\n        nexSys.eventStream.raiseEvent('ItemUpdatedInv', args.item);\n    }\n};\n\nnexSys.eventStream.registerEvent('Char.Items.Update', updatedItem);\n\nlet listItems = function(args) {\n    if(args.location == \"room\") {\n        GMCP.Items.room = args.items;\n        nexSys.eventStream.raiseEvent('ItemListForRoom', args.items);\n    }\n    else if(args.location == \"inv\") {\n        GMCP.Items.inv = args.items;\n        nexSys.eventStream.raiseEvent('ItemListForInv', args.items);\n    }\n};\n\nnexSys.eventStream.registerEvent('Char.Items.List', listItems);\n\nsend_GMCP('Char.Items.Inv')\nsend_GMCP('Char.Items.room')"
        }
      ],
      "text": "systest"
    }
  ]
}